# ðŸ³ OpenClaw éƒ¨ç½²æ–¹å¼æ¯”è¼ƒ

> **å‘é‡æª¢ç´¢æ¨™ç±¤**ï¼š`deployment`, `docker`, `npm`, `nix`, `kubernetes`, `éƒ¨ç½²æ–¹å¼`

---

## ðŸ“Š éƒ¨ç½²æ–¹å¼ç¸½è¦½

| æ–¹å¼ | è¤‡é›œåº¦ | å®‰å…¨æ€§ | å¯æ“´å±•æ€§ | é©ç”¨å ´æ™¯ |
|------|--------|--------|----------|----------|
| **npm å…¨åŸŸ** | â­ | â­â­ | â­ | å€‹äººé–‹ç™¼ã€æ¸¬è©¦ |
| **Docker Compose** | â­â­ | â­â­â­â­ | â­â­â­ | å°åž‹ç”Ÿç”¢ç’°å¢ƒ |
| **Nix Flake** | â­â­â­ | â­â­â­â­ | â­â­â­ | å¯é‡ç¾éƒ¨ç½² |
| **Kubernetes** | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | ä¼æ¥­ç´šéƒ¨ç½² |

---

## æ–¹å¼ä¸€ï¼šnpm å…¨åŸŸå®‰è£

### é©ç”¨å ´æ™¯
- å€‹äººé–‹ç™¼ç’°å¢ƒ
- å¿«é€Ÿæ¸¬è©¦
- å–®æ©Ÿéƒ¨ç½²

### å„ªé»ž
- å®‰è£ç°¡å–®ï¼Œä¸€è¡ŒæŒ‡ä»¤
- æ›´æ–°æ–¹ä¾¿
- ç„¡éœ€å®¹å™¨çŸ¥è­˜

### ç¼ºé»ž
- å®‰å…¨éš”é›¢è¼ƒå·®
- é›£ä»¥ç®¡ç†å¤šç‰ˆæœ¬
- ä¸é©åˆç”Ÿç”¢ç’°å¢ƒ

### å®‰è£æŒ‡ä»¤

```bash
# å®‰è£
npm install -g openclaw@latest

# å•Ÿå‹•
openclaw gateway --port 18789

# æ›´æ–°
npm update -g openclaw
```

---

## æ–¹å¼äºŒï¼šDocker Composeï¼ˆæŽ¨è–¦ç”Ÿç”¢ç’°å¢ƒï¼‰

### é©ç”¨å ´æ™¯
- å°åž‹è‡³ä¸­åž‹ç”Ÿç”¢ç’°å¢ƒ
- éœ€è¦å®‰å…¨éš”é›¢
- éœ€è¦æŒä¹…åŒ–æ•¸æ“š

### å„ªé»ž
- è‰¯å¥½çš„å®‰å…¨éš”é›¢
- æ˜“æ–¼å‚™ä»½å’Œé·ç§»
- åŒ…å«å¯é¸çš„ Redis + Qdrant

### ç¼ºé»ž
- éœ€è¦ Docker çŸ¥è­˜
- è³‡æºæ¶ˆè€—è¼ƒå¤§

### éƒ¨ç½²æ­¥é©Ÿ

```bash
# 1. å‰µå»ºç›®éŒ„
mkdir -p ~/openclaw && cd ~/openclaw

# 2. å‰µå»º docker-compose.yml
cat > docker-compose.yml << 'EOF'
version: '3.8'

services:
  openclaw-gateway:
    image: openclaw/openclaw:latest
    container_name: openclaw-gateway
    restart: unless-stopped
    ports:
      - "18789:18789"
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - GATEWAY_PORT=18789
      - NODE_ENV=production
    volumes:
      - openclaw-data:/app/data
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:18789/health"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  openclaw-data:
EOF

# 3. è¨­ç½®ç’°å¢ƒè®Šæ•¸
export ANTHROPIC_API_KEY="your-key"

# 4. å•Ÿå‹•
docker compose up -d

# 5. æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f openclaw-gateway
```

### ç®¡ç†æŒ‡ä»¤

```bash
# åœæ­¢
docker compose down

# é‡å•Ÿ
docker compose restart

# æ›´æ–°æ˜ åƒ
docker compose pull && docker compose up -d

# å‚™ä»½æ•¸æ“š
docker run --rm -v openclaw-data:/data -v $(pwd):/backup alpine tar czf /backup/openclaw-backup.tar.gz /data
```

---

## æ–¹å¼ä¸‰ï¼šNix Flake

### é©ç”¨å ´æ™¯
- éœ€è¦å¯é‡ç¾éƒ¨ç½²
- NixOS ç”¨æˆ¶
- CI/CD ç’°å¢ƒ

### å„ªé»ž
- å®Œå…¨å¯é‡ç¾çš„ç’°å¢ƒ
- ç‰ˆæœ¬éŽ–å®š
- åŽŸå­æ›´æ–°å’Œå›žæ»¾

### ç¼ºé»ž
- å­¸ç¿’æ›²ç·šé™¡å³­
- éœ€è¦ Nix çŸ¥è­˜

### éƒ¨ç½²æ­¥é©Ÿ

```nix
# flake.nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    openclaw.url = "github:openclaw/openclaw";
  };

  outputs = { self, nixpkgs, openclaw }: {
    packages.x86_64-linux.default = openclaw.packages.x86_64-linux.default;
    
    nixosModules.default = { config, ... }: {
      services.openclaw = {
        enable = true;
        port = 18789;
      };
    };
  };
}
```

```bash
# åŸ·è¡Œ
nix run github:openclaw/openclaw

# é€²å…¥é–‹ç™¼ç’°å¢ƒ
nix develop github:openclaw/openclaw
```

---

## æ–¹å¼å››ï¼šKubernetes

### é©ç”¨å ´æ™¯
- ä¼æ¥­ç´šéƒ¨ç½²
- éœ€è¦é«˜å¯ç”¨æ€§
- å¤šç§Ÿæˆ¶ç’°å¢ƒ

### éƒ¨ç½²æ¸…å–®

```yaml
# openclaw-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: openclaw-gateway
  labels:
    app: openclaw
spec:
  replicas: 3
  selector:
    matchLabels:
      app: openclaw
  template:
    metadata:
      labels:
        app: openclaw
    spec:
      containers:
      - name: openclaw
        image: openclaw/openclaw:latest
        ports:
        - containerPort: 18789
        env:
        - name: ANTHROPIC_API_KEY
          valueFrom:
            secretKeyRef:
              name: openclaw-secrets
              key: anthropic-api-key
        resources:
          limits:
            memory: "512Mi"
            cpu: "500m"
          requests:
            memory: "256Mi"
            cpu: "250m"
        livenessProbe:
          httpGet:
            path: /health
            port: 18789
          initialDelaySeconds: 10
          periodSeconds: 30
---
apiVersion: v1
kind: Service
metadata:
  name: openclaw-service
spec:
  selector:
    app: openclaw
  ports:
  - port: 18789
    targetPort: 18789
  type: LoadBalancer
```

```bash
# éƒ¨ç½²
kubectl apply -f openclaw-deployment.yaml

# å‰µå»º Secrets
kubectl create secret generic openclaw-secrets \
  --from-literal=anthropic-api-key="sk-ant-..."

# æŸ¥çœ‹ç‹€æ…‹
kubectl get pods -l app=openclaw
```

---

## ðŸ”„ éƒ¨ç½²æ–¹å¼é¸æ“‡æµç¨‹

```
é–‹å§‹
  â”‚
  â”œâ”€ åªæ˜¯æ¸¬è©¦ï¼Ÿ â”€â”€æ˜¯â”€â”€> npm å…¨åŸŸå®‰è£
  â”‚
  â”œâ”€ å–®æ©Ÿç”Ÿç”¢ï¼Ÿ â”€â”€æ˜¯â”€â”€> Docker Compose
  â”‚
  â”œâ”€ éœ€è¦å¯é‡ç¾ï¼Ÿ â”€â”€æ˜¯â”€â”€> Nix Flake
  â”‚
  â””â”€ ä¼æ¥­/é«˜å¯ç”¨ï¼Ÿ â”€â”€æ˜¯â”€â”€> Kubernetes
```

---

*æ–‡æª”ç‰ˆæœ¬ï¼š1.0*
