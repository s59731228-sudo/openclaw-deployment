# ğŸ¤– OpenClaw å¤šæ¨¡å‹æ•´åˆ

> **å‘é‡æª¢ç´¢æ¨™ç±¤**ï¼š`multi-model`, `claude`, `gpt`, `gemini`, `openrouter`, `routing`, `å¤šæ¨¡å‹`

---

## ğŸ“Š æ”¯æ´çš„æ¨¡å‹ä¾›æ‡‰å•†

| ä¾›æ‡‰å•† | æ¨¡å‹ | ç‰¹é» | é©ç”¨å ´æ™¯ |
|--------|------|------|----------|
| **Anthropic** | Claude Sonnet 4, Opus 4 | æ¨ç†èƒ½åŠ›å¼· | è¤‡é›œä»»å‹™ã€ç¨‹å¼ç¢¼ |
| **OpenAI** | GPT-4o, GPT-4o-mini | é€šç”¨æ€§å¼· | ä¸€èˆ¬å°è©±ã€å‰µæ„ |
| **Google** | Gemini 2.0 Flash/Pro | å¤šæ¨¡æ…‹å¼· | åœ–ç‰‡ç†è§£ã€é•·ä¸Šä¸‹æ–‡ |
| **OpenRouter** | å¤šæ¨¡å‹èšåˆ | ä¸€å€‹ API å¤šæ¨¡å‹ | æˆæœ¬å„ªåŒ–ã€éˆæ´»åˆ‡æ› |

---

## âš™ï¸ é…ç½®æ–¹å¼

### åŸºæœ¬é…ç½®ï¼ˆ~/.openclaw/openclaw.jsonï¼‰

```json
{
  "models": {
    "default": "claude-sonnet-4-20250514",
    "providers": {
      "anthropic": {
        "enabled": true,
        "models": [
          "claude-sonnet-4-20250514",
          "claude-opus-4-20250514"
        ],
        "apiKey": "${ANTHROPIC_API_KEY}"
      },
      "openai": {
        "enabled": true,
        "models": [
          "gpt-4o",
          "gpt-4o-mini"
        ],
        "apiKey": "${OPENAI_API_KEY}"
      },
      "google": {
        "enabled": true,
        "models": [
          "gemini-2.0-flash",
          "gemini-2.0-pro"
        ],
        "apiKey": "${GOOGLE_API_KEY}"
      }
    }
  }
}
```

---

## ğŸ”€ è·¯ç”±ç­–ç•¥

### ç­–ç•¥ä¸€ï¼šæ•…éšœè½‰ç§»ï¼ˆFallbackï¼‰

ä¸»æ¨¡å‹å¤±æ•—æ™‚è‡ªå‹•åˆ‡æ›åˆ°å‚™ç”¨æ¨¡å‹ï¼š

```json
{
  "models": {
    "routing": {
      "strategy": "fallback",
      "fallbackOrder": ["anthropic", "openai", "google"],
      "maxRetries": 3,
      "retryDelay": 1000
    }
  }
}
```

**å·¥ä½œæµç¨‹**ï¼š
```
è«‹æ±‚ â†’ Anthropic â†’ å¤±æ•— â†’ OpenAI â†’ å¤±æ•— â†’ Google â†’ æˆåŠŸ
```

---

### ç­–ç•¥äºŒï¼šè² è¼‰å‡è¡¡ï¼ˆLoad Balanceï¼‰

å°‡è«‹æ±‚åˆ†æ•£åˆ°å¤šå€‹ä¾›æ‡‰å•†ï¼š

```json
{
  "models": {
    "routing": {
      "strategy": "load-balance",
      "weights": {
        "anthropic": 50,
        "openai": 30,
        "google": 20
      }
    }
  }
}
```

---

### ç­–ç•¥ä¸‰ï¼šæˆæœ¬å„ªåŒ–ï¼ˆCost Optimizeï¼‰

æ ¹æ“šä»»å‹™è¤‡é›œåº¦é¸æ“‡æ¨¡å‹ï¼š

```json
{
  "models": {
    "routing": {
      "strategy": "cost-optimize",
      "rules": [
        {
          "condition": "tokens < 1000",
          "model": "gpt-4o-mini"
        },
        {
          "condition": "task.type == 'code'",
          "model": "claude-sonnet-4-20250514"
        },
        {
          "condition": "task.type == 'image'",
          "model": "gemini-2.0-flash"
        },
        {
          "condition": "default",
          "model": "gpt-4o"
        }
      ]
    }
  }
}
```

---

### ç­–ç•¥å››ï¼šä»»å‹™è·¯ç”±ï¼ˆTask Routeï¼‰

æ ¹æ“šä»»å‹™é¡å‹é¸æ“‡æœ€é©åˆçš„æ¨¡å‹ï¼š

```json
{
  "models": {
    "routing": {
      "strategy": "task-route",
      "taskModels": {
        "code": "claude-sonnet-4-20250514",
        "creative": "gpt-4o",
        "analysis": "gemini-2.0-pro",
        "chat": "gpt-4o-mini",
        "vision": "gemini-2.0-flash"
      }
    }
  }
}
```

---

## ğŸŒ OpenRouter æ•´åˆ

OpenRouter æä¾›å–®ä¸€ API å­˜å–å¤šç¨®æ¨¡å‹ï¼š

### é…ç½®

```json
{
  "models": {
    "providers": {
      "openrouter": {
        "enabled": true,
        "apiKey": "${OPENROUTER_API_KEY}",
        "baseUrl": "https://openrouter.ai/api/v1",
        "models": [
          "anthropic/claude-3.5-sonnet",
          "openai/gpt-4o",
          "google/gemini-pro",
          "meta-llama/llama-3.1-405b"
        ],
        "defaultModel": "auto"
      }
    }
  }
}
```

### å„ªé»
- å–®ä¸€ API é‡‘é‘°
- è‡ªå‹•é¸æ“‡æœ€ä½³æ¨¡å‹ï¼ˆauto æ¨¡å¼ï¼‰
- çµ±ä¸€è¨ˆè²»

### è¨­ç½®ç’°å¢ƒè®Šæ•¸

```bash
export OPENROUTER_API_KEY="sk-or-..."
```

---

## ğŸ’° æˆæœ¬å„ªåŒ–å»ºè­°

### æ¨¡å‹åƒ¹æ ¼æ¯”è¼ƒï¼ˆæ¯ç™¾è¬ tokenï¼‰

| æ¨¡å‹ | è¼¸å…¥åƒ¹æ ¼ | è¼¸å‡ºåƒ¹æ ¼ | æ¨è–¦ç”¨é€” |
|------|----------|----------|----------|
| GPT-4o-mini | $0.15 | $0.60 | ç°¡å–®ä»»å‹™ |
| Gemini Flash | $0.075 | $0.30 | é«˜é »ä»»å‹™ |
| Claude Sonnet | $3.00 | $15.00 | è¤‡é›œæ¨ç† |
| GPT-4o | $2.50 | $10.00 | é€šç”¨ä»»å‹™ |
| Claude Opus | $15.00 | $75.00 | æ¥µè¤‡é›œä»»å‹™ |

### æˆæœ¬å„ªåŒ–ç­–ç•¥

1. **ç°¡å–®ä»»å‹™ç”¨ä¾¿å®œæ¨¡å‹**ï¼šæ—¥å¸¸å°è©±ç”¨ GPT-4o-mini
2. **è¤‡é›œä»»å‹™æ‰ç”¨è²´æ¨¡å‹**ï¼šç¨‹å¼ç¢¼å¯©æŸ¥ç”¨ Claude Sonnet
3. **è¨­ç½®ç”¨é‡ä¸Šé™**ï¼šé˜²æ­¢æ„å¤–é«˜é¡å¸³å–®
4. **ä½¿ç”¨å¿«å–**ï¼šé‡è¤‡æŸ¥è©¢ä¸é‡æ–°å‘¼å« API

---

## ğŸ”§ ç’°å¢ƒè®Šæ•¸è¨­ç½®

```bash
# å„ä¾›æ‡‰å•† API é‡‘é‘°
export ANTHROPIC_API_KEY="sk-ant-..."
export OPENAI_API_KEY="sk-..."
export GOOGLE_API_KEY="AIza..."
export OPENROUTER_API_KEY="sk-or-..."

# å¯«å…¥ ~/.zshrc æŒä¹…åŒ–
cat >> ~/.zshrc << 'EOF'
export ANTHROPIC_API_KEY="sk-ant-..."
export OPENAI_API_KEY="sk-..."
export GOOGLE_API_KEY="AIza..."
EOF
source ~/.zshrc
```

---

## â“ å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•æ¸¬è©¦æ¨¡å‹é€£ç·šï¼Ÿ

```bash
# æ¸¬è©¦ Anthropic
curl https://api.anthropic.com/v1/messages \
  -H "x-api-key: $ANTHROPIC_API_KEY" \
  -H "anthropic-version: 2023-06-01" \
  -H "content-type: application/json" \
  -d '{"model":"claude-sonnet-4-20250514","max_tokens":10,"messages":[{"role":"user","content":"Hi"}]}'
```

### Q: æ•…éšœè½‰ç§»ä¸ç”Ÿæ•ˆï¼Ÿ

æª¢æŸ¥é…ç½®é †åºå’Œ API é‡‘é‘°æ˜¯å¦æ­£ç¢ºï¼š
```bash
openclaw config show | grep -A 20 "routing"
```

### Q: å¦‚ä½•é™åˆ¶æ¯æœˆç”¨é‡ï¼Ÿ

```json
{
  "billing": {
    "monthlyLimit": 100,
    "alertThreshold": 80,
    "alertEmail": "your@email.com"
  }
}
```

---

*æ–‡æª”ç‰ˆæœ¬ï¼š1.0*
