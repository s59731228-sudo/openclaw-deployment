# ğŸ“¦ éƒ¨ç½²åƒæ•¸èˆ‡ç›¸ä¾æ€§æ‘˜è¦

> **å‘é‡æª¢ç´¢æ¨™ç±¤**ï¼š`deployment`, `parameters`, `dependencies`, `docker`, `npm`, `environment`, `éƒ¨ç½²`, `ç›¸ä¾æ€§`, `ç’°å¢ƒè®Šæ•¸`
> **è³‡æ–™ä¾†æº**ï¼šå®˜æ–¹æ–‡æª” + å¯¦æˆ°é©—è­‰

---

## ğŸ“‹ éƒ¨ç½²æ–¹å¼æ¯”è¼ƒ

| éƒ¨ç½²æ–¹å¼ | é©ç”¨å ´æ™¯ | è¤‡é›œåº¦ | å®‰å…¨æ€§ | ç³»çµ±éœ€æ±‚ |
|----------|----------|--------|--------|----------|
| **npm å…¨å±€** | å€‹äººé–‹ç™¼ | â­ | â­â­ | Node.js 22+ |
| **Docker** | VPS/é›²ç«¯ | â­â­ | â­â­â­ | Docker 24+ |
| **DigitalOcean** | ä¸€éµéƒ¨ç½² | â­ | â­â­â­â­ | ç„¡ |
| **Nix Flake** | å¯é‡ç¾ | â­â­â­ | â­â­â­â­ | Nix |
| **K8s** | å¤§è¦æ¨¡ | â­â­â­â­ | â­â­â­â­â­ | K8s é›†ç¾¤ |

---

## 1ï¸âƒ£ ç³»çµ±éœ€æ±‚

### æœ€ä½éœ€æ±‚

| é …ç›® | æœ€ä½ç‰ˆæœ¬ | æ¨è–¦ç‰ˆæœ¬ |
|------|----------|----------|
| **Node.js** | 22.0.0 | 22.x LTS |
| **npm** | 10.0.0 | 10.x |
| **è¨˜æ†¶é«”** | 2 GB | 4 GB |
| **ç£ç¢Ÿ** | 5 GB | 20 GB |
| **ç¶²è·¯** | ç©©å®šé€£ç·š | ä½å»¶é² |

### ä½œæ¥­ç³»çµ±æ”¯æ´

| ç³»çµ± | æ”¯æ´ç‹€æ…‹ | å‚™è¨» |
|------|----------|------|
| macOS 13+ | âœ… å®Œæ•´ | åŸç”Ÿæ”¯æ´ |
| Ubuntu 22.04+ | âœ… å®Œæ•´ | æ¨è–¦ |
| Debian 12+ | âœ… å®Œæ•´ | |
| Windows 11 | âš ï¸ WSL2 | éœ€è¦ WSL2 |
| Windows 10 | âš ï¸ WSL2 | éœ€è¦ WSL2 |

---

## 2ï¸âƒ£ ç’°å¢ƒè®Šæ•¸å®Œæ•´åˆ—è¡¨

### æ ¸å¿ƒé…ç½®

```bash
# ~/.bashrc æˆ– ~/.zshrc

# === API Keysï¼ˆå¿…è¦ï¼‰===
export ANTHROPIC_API_KEY="sk-ant-xxx"      # Claude API
export OPENAI_API_KEY="sk-xxx"              # OpenAI API
export GOOGLE_API_KEY="AIza-xxx"            # Gemini API

# === å‚™ç”¨ API Keysï¼ˆè¼ªæ›¿ç”¨ï¼‰===
export ANTHROPIC_API_KEY_2="sk-ant-xxx"     # å‚™ç”¨ Claude
export OPENAI_API_KEY_2="sk-xxx"            # å‚™ç”¨ OpenAI

# === OpenRouterï¼ˆå¤šæ¨¡å‹è·¯ç”±ï¼‰===
export OPENROUTER_API_KEY="sk-or-xxx"

# === MCP å·¥å…· ===
export BRAVE_API_KEY="BSATxxx"              # Brave Search
export GITHUB_TOKEN="ghp_xxx"               # GitHub API

# === è·¯å¾‘é…ç½® ===
export OPENCLAW_HOME="$HOME/.openclaw"      # OpenClaw ä¸»ç›®éŒ„
export OPENCLAW_WORKSPACE="$HOME/.openclaw/workspace"
```

### Docker ç’°å¢ƒè®Šæ•¸

```bash
# docker-compose.yml ä½¿ç”¨
GATEWAY_PORT=18789
GATEWAY_HOST=0.0.0.0
LOG_LEVEL=info
NODE_ENV=production
TZ=Asia/Taipei
```

### å®Œæ•´ç’°å¢ƒè®Šæ•¸è¡¨

| è®Šæ•¸å | å¿…è¦æ€§ | èªªæ˜ | ç¯„ä¾‹ |
|--------|--------|------|------|
| `ANTHROPIC_API_KEY` | å¿…è¦ | Claude API Key | `sk-ant-xxx` |
| `OPENAI_API_KEY` | å»ºè­° | OpenAI API Key | `sk-xxx` |
| `GOOGLE_API_KEY` | å»ºè­° | Gemini API Key | `AIza-xxx` |
| `OPENROUTER_API_KEY` | é¸ç”¨ | OpenRouter Key | `sk-or-xxx` |
| `BRAVE_API_KEY` | é¸ç”¨ | Brave Search | `BSATxxx` |
| `GITHUB_TOKEN` | é¸ç”¨ | GitHub API | `ghp_xxx` |
| `OPENCLAW_HOME` | é¸ç”¨ | ä¸»ç›®éŒ„ | `~/.openclaw` |
| `GATEWAY_PORT` | é¸ç”¨ | ç¶²é—œç«¯å£ | `18789` |
| `LOG_LEVEL` | é¸ç”¨ | æ—¥èªŒç´šåˆ¥ | `info` |
| `NODE_ENV` | é¸ç”¨ | ç’°å¢ƒ | `production` |

---

## 3ï¸âƒ£ npm ä¾è³´

### package.json æ ¸å¿ƒä¾è³´

```json
{
  "name": "openclaw",
  "engines": {
    "node": ">=22.0.0",
    "npm": ">=10.0.0"
  },
  "dependencies": {
    // AI SDK
    "@anthropic-ai/sdk": "^0.32.0",
    "@openai/api": "^4.67.0",
    "@google/generative-ai": "^0.21.0",
    
    // MCP å”è­°
    "@modelcontextprotocol/sdk": "^1.0.0",
    
    // Telegram æ•´åˆ
    "telegraf": "^4.16.0",
    
    // å‘é‡æœç´¢
    "sqlite-vec": "^0.1.0",
    
    // å·¥å…·
    "zod": "^3.23.0",
    "dotenv": "^16.4.0"
  },
  "optionalDependencies": {
    // æœ¬åœ°åµŒå…¥ï¼ˆå¯é¸ï¼‰
    "llama-cpp-embeddings": "^0.1.0"
  }
}
```

### å…¨å±€å®‰è£

```bash
# å®‰è£ OpenClaw CLI
npm install -g openclaw@latest

# é©—è­‰å®‰è£
openclaw --version
openclaw doctor
```

---

## 4ï¸âƒ£ Docker éƒ¨ç½²é…ç½®

### docker-compose.yml

```yaml
version: '3.8'

services:
  openclaw-gateway:
    image: openclaw/openclaw:latest
    container_name: openclaw-gateway
    restart: unless-stopped
    
    ports:
      - "${GATEWAY_PORT:-18789}:18789"
    
    environment:
      - NODE_ENV=production
      - TZ=Asia/Taipei
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - LOG_LEVEL=${LOG_LEVEL:-info}
    
    volumes:
      # é…ç½®æŒä¹…åŒ–
      - ./config:/root/.openclaw:rw
      # è¨˜æ†¶æŒä¹…åŒ–
      - ./memory:/root/.openclaw/memory:rw
      # æ—¥èªŒ
      - ./logs:/var/log/openclaw:rw
    
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:18789/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    # è³‡æºé™åˆ¶
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 4G
        reservations:
          cpus: '0.5'
          memory: 1G

  # å¯é¸ï¼šRedis å¿«å–
  redis:
    image: redis:7-alpine
    container_name: openclaw-redis
    restart: unless-stopped
    volumes:
      - redis-data:/data

volumes:
  redis-data:
```

### Dockerfileï¼ˆè‡ªå»ºæ˜ åƒï¼‰

```dockerfile
FROM node:22-alpine

WORKDIR /app

# å®‰è£ç³»çµ±ä¾è³´
RUN apk add --no-cache \
    git \
    curl \
    python3 \
    make \
    g++

# å®‰è£ OpenClaw
RUN npm install -g openclaw@latest

# å»ºç«‹é root ç”¨æˆ¶
RUN addgroup -S openclaw && adduser -S openclaw -G openclaw
USER openclaw

# é…ç½®ç›®éŒ„
RUN mkdir -p /home/openclaw/.openclaw

EXPOSE 18789

ENTRYPOINT ["openclaw"]
CMD ["gateway", "--port", "18789", "--verbose"]
```

---

## 5ï¸âƒ£ é…ç½®æª”çµæ§‹

### ç›®éŒ„çµæ§‹

```
~/.openclaw/
â”œâ”€â”€ openclaw.json           # ä¸»é…ç½®ï¼ˆJSON5 æ ¼å¼ï¼‰
â”œâ”€â”€ .env                    # ç’°å¢ƒè®Šæ•¸
â”œâ”€â”€ workspace/              # å·¥ä½œå€
â”‚   â”œâ”€â”€ SOUL.md             # äººæ ¼å®šç¾©
â”‚   â”œâ”€â”€ MEMORY.md           # é•·æœŸè¨˜æ†¶
â”‚   â”œâ”€â”€ AGENTS.md           # æ“ä½œæŒ‡å—
â”‚   â”œâ”€â”€ HEARTBEAT.md        # å®šæœŸä»»å‹™
â”‚   â”œâ”€â”€ memory/             # æ¯æ—¥æ—¥èªŒ
â”‚   â”‚   â””â”€â”€ YYYY-MM-DD.md
â”‚   â””â”€â”€ skills/             # è‡ªè¨‚æŠ€èƒ½
â”œâ”€â”€ skills/                 # è¨—ç®¡æŠ€èƒ½
â”œâ”€â”€ credentials/            # æ†‘è­‰
â”‚   â”œâ”€â”€ telegram/
â”‚   â””â”€â”€ whatsapp/
â”œâ”€â”€ memory/                 # å‘é‡è³‡æ–™åº«
â”‚   â””â”€â”€ {agentId}.sqlite
â””â”€â”€ logs/                   # æ—¥èªŒ
```

### openclaw.json å®Œæ•´ç¯„æœ¬

```json5
{
  // ç¶²é—œé…ç½®
  "gateway": {
    "port": 18789,
    "host": "0.0.0.0",
    "cors": {
      "enabled": true,
      "origins": ["*"]
    }
  },
  
  // ä»£ç†é…ç½®
  "agents": {
    "defaults": {
      // æ¨¡å‹é…ç½®
      "model": {
        "primary": "anthropic/claude-opus-4-5",
        "fallbacks": [
          "anthropic/claude-sonnet-4-5",
          "openai/gpt-5.2"
        ]
      },
      
      // è¨˜æ†¶é…ç½®
      "memorySearch": {
        "enabled": true,
        "provider": "auto",
        "model": "text-embedding-3-small",
        "query": {
          "maxResults": 6,
          "minScore": 0.35,
          "hybrid": {
            "enabled": true,
            "vectorWeight": 0.7,
            "textWeight": 0.3
          }
        }
      },
      
      // æœƒè©±é…ç½®
      "session": {
        "daily": {
          "enabled": true,
          "at": "04:00"
        }
      },
      
      // æ²™ç®±é…ç½®
      "sandbox": {
        "mode": "off"
      }
    }
  },
  
  // æ¨¡å‹æä¾›è€…
  "models": {
    "providers": {
      "copilot-proxy": {
        "baseUrl": "http://localhost:3000/api",
        "apiKey": "${COPILOT_TOKEN}",
        "api": "openai-completions",
        "models": [
          { "id": "gpt-5.2", "name": "GPT-5.2" },
          { "id": "claude-opus-4.5", "name": "Claude Opus" }
        ]
      }
    }
  },
  
  // æŠ€èƒ½é…ç½®
  "skills": {
    "allowBundled": ["web", "exec"],
    "load": {
      "extraDirs": ["~/.claude/skills"],
      "watch": true
    }
  },
  
  // å·¥å…·é…ç½®
  "tools": {
    "allow": ["*"],
    "elevated": {
      "enabled": true
    }
  }
}
```

---

## 6ï¸âƒ£ ç¶²è·¯é…ç½®

### ç«¯å£èªªæ˜

| ç«¯å£ | ç”¨é€” | é è¨­ |
|------|------|------|
| 18789 | Gateway HTTP | å¿…è¦ |
| 3000 | Copilot Proxy | é¸ç”¨ |
| 11434 | Ollama | é¸ç”¨ |
| 6379 | Redis | é¸ç”¨ |

### é˜²ç«ç‰†è¦å‰‡

```bash
# UFW (Ubuntu)
sudo ufw allow 18789/tcp

# iptables
sudo iptables -A INPUT -p tcp --dport 18789 -j ACCEPT

# macOS
# ç³»çµ±åå¥½è¨­å®š â†’ å®‰å…¨æ€§èˆ‡éš±ç§æ¬Š â†’ é˜²ç«ç‰†
```

### åå‘ä»£ç†ï¼ˆNginxï¼‰

```nginx
server {
    listen 443 ssl http2;
    server_name openclaw.example.com;
    
    ssl_certificate /etc/ssl/certs/openclaw.crt;
    ssl_certificate_key /etc/ssl/private/openclaw.key;
    
    location / {
        proxy_pass http://127.0.0.1:18789;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_read_timeout 86400;
    }
}
```

---

## 7ï¸âƒ£ å¥åº·æª¢æŸ¥

### CLI æŒ‡ä»¤

```bash
# å®Œæ•´è¨ºæ–·
openclaw doctor

# å¥åº·æª¢æŸ¥
openclaw health

# æ¨¡å‹ç‹€æ…‹
openclaw models status

# è¨˜æ†¶ç‹€æ…‹
openclaw memory status --deep
```

### API ç«¯é»

```bash
# å¥åº·æª¢æŸ¥
curl http://localhost:18789/health

# è©³ç´°ç‹€æ…‹
curl http://localhost:18789/status
```

### é æœŸå›æ‡‰

```json
{
  "status": "healthy",
  "version": "2.1.x",
  "uptime": 3600,
  "models": {
    "primary": "anthropic/claude-opus-4-5",
    "available": true
  },
  "memory": {
    "enabled": true,
    "indexed": 1234
  }
}
```

---

## 8ï¸âƒ£ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

| å•é¡Œ | åŸå›  | è§£æ±ºæ–¹æ¡ˆ |
|------|------|----------|
| Port è¢«ä½”ç”¨ | å…¶ä»–é€²ç¨‹ | `lsof -i :18789` + æ›ç«¯å£ |
| Node ç‰ˆæœ¬éŒ¯èª¤ | ç‰ˆæœ¬éä½ | `nvm install 22` |
| API Key ç„¡æ•ˆ | é‡‘é‘°éŒ¯èª¤ | é‡æ–°é…ç½® `openclaw onboard` |
| è¨˜æ†¶æœç´¢å¤±æ•— | ç´¢å¼•å•é¡Œ | `openclaw memory index` |
| Docker æ¬Šé™ | é root | ä½¿ç”¨ `--user` åƒæ•¸ |

### æ—¥èªŒä½ç½®

```bash
# OpenClaw æ—¥èªŒ
~/.openclaw/logs/

# Docker æ—¥èªŒ
docker logs openclaw-gateway

# å³æ™‚æ—¥èªŒ
openclaw logs --follow
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [02-éƒ¨ç½²æ–¹å¼.md](./02-éƒ¨ç½²æ–¹å¼.md)
- [03-å®‰å…¨é…ç½®.md](./03-å®‰å…¨é…ç½®.md)
- [12-è¼ªè©¢ç­–ç•¥æœ€ä½³å¯¦è¸.md](./12-è¼ªè©¢ç­–ç•¥æœ€ä½³å¯¦è¸.md)

---

*æœ€å¾Œæ›´æ–°ï¼š2026-02-04*
